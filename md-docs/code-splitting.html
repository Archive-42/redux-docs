<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>code-splitting</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}

  </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.css">

<script async defer src="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.js"></script>
    </head>
<body>

<ul>

<ul>



<ul>




<ul>

</ul></li>
</ul></li>



</ul></li>

<ul>

</ul></li>
</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">FAQ</a>
<ul>

</ul></li>

<ul>

</ul></li>


</ul></li>
<li><a href="#!" class="menu__link menu__link--sublist">Redux Toolkit</a>
<ul>

</ul></li>
</ul>
<h1 id="code-splitting"><span id="code-splitting" class="anchor enhancedAnchor_2LWZ"></span>Code Splitting<a href="#code-splitting" class="hash-link" title="Direct link to heading">#</a></h1>
<p>In large web applications, it is often desirable to split up the app code into multiple JS bundles that can be loaded on-demand. This strategy, called ‘code splitting’, helps to increase performance of your application by reducing the size of the initial JS payload that must be fetched.</p>
<p>To code split with Redux, we want to be able to dynamically add reducers to the store. However, Redux really only has a single root reducer function. This root reducer is normally generated by calling <code class="language-js >combineReducers()</code> or a similar function when the application is initialized. In order to dynamically add more reducers, we need to call that function again to re-generate the root reducer. Below, we discuss some approaches to solving this problem and reference two libraries that provide this functionality.</p>
<h2 id="basic-principle"><span id="basic-principle" class="anchor enhancedAnchor_2LWZ"></span>Basic Principle<a href="#basic-principle" class="hash-link" title="Direct link to heading">#</a></h2>
<h3 id="using-replacereducer"><span id="using-replacereducer" class="anchor enhancedAnchor_2LWZ"></span>Using <code class="language-js >replaceReducer</code><a href="#using-replacereducer" class="hash-link" title="Direct link to heading">#</a></h3>
<p>The Redux store exposes a <code class="language-js >replaceReducer</code> function, which replaces the current active root reducer function with a new root reducer function. Calling it will swap the internal reducer function reference, and dispatch an action to help any newly-added slice reducers initialize themselves:</p>
<p><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> newRootReducer </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #000000">(</span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> existingSlice</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> existingSliceReducer</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain"> newSlice</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> newSliceReducer</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain">store</span><span class="token punctuation" style="color: #000000">.</span><span class="token method function property-access" style="color: #e6d874">replaceReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">newRootReducer</span><span class="token punctuation" style="color: #000000">)</span></p>
<p>Copy</p>
<h2 id="reducer-injection-approaches"><span id="reducer-injection-approaches" class="anchor enhancedAnchor_2LWZ"></span>Reducer Injection Approaches<a href="#reducer-injection-approaches" class="hash-link" title="Direct link to heading">#</a></h2>
<h3 id="defining-an-injectreducer-function"><span id="defining-an-injectreducer-function" class="anchor enhancedAnchor_2LWZ"></span>Defining an <code class="language-js >injectReducer</code> function<a href="#defining-an-injectreducer-function" class="hash-link" title="Direct link to heading">#</a></h3>
<p>We will likely want to call <code class="language-js >store.replaceReducer()</code> from anywhere in the application. Because of that, it’s helpful to define a reusable <code class="language-js >injectReducer()</code> function that keeps references to all of the existing slice reducers, and attach that to the store instance.</p>
<p><span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #000000">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #000000">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘redux’</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Define the Reducers that will always be present in the application</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> staticReducers </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> users</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain"> posts</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> postsReducer</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Configure the store</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">default</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">configureStore</span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">initialState</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #000000">(</span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token punctuation" style="color: #000000">)</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add a dictionary to keep track of the registered async reducers</span><span class="token plain"></span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">asyncReducers</span><span class="token plain"> </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create an inject reducer function</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// This function adds the async reducer, and creates a new combined reducer</span><span class="token plain"></span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #000000">.</span><span class="token method-variable function-variable method function property-access" style="color: #e6d874">injectReducer</span><span class="token plain"> </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color: #000000">,</span><span class="token parameter"> asyncReducer</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #000000">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">asyncReducers</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"> </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> asyncReducer</span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #000000">.</span><span class="token method function property-access" style="color: #e6d874">replaceReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">asyncReducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Return the modified store</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> store</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">asyncReducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #000000">(</span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token spread operator" style="color: #000000">…</span><span class="token plain">staticReducers</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token spread operator" style="color: #000000">…</span><span class="token plain">asyncReducers</span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span></p>
<p>Copy</p>
<p>Now, one just needs to call <code class="language-js >store.injectReducer</code> to add a new reducer to the store.</p>
<h3 id="using-a-reducer-manager"><span id="using-a-reducer-manager" class="anchor enhancedAnchor_2LWZ"></span>Using a ‘Reducer Manager’<a href="#using-a-reducer-manager" class="hash-link" title="Direct link to heading">#</a></h3>
<p>Another approach is to create a ‘Reducer Manager’ object, which keeps track of all the registered reducers and exposes a <code class="language-js >reduce()</code> function. Consider the following example:</p>
<p><span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducerManager</span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">initialReducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create an object which maps keys to reducers</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> reducers </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"> </span><span class="token spread operator" style="color: #000000">…</span><span class="token plain">initialReducers </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create the initial combinedReducer</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> combinedReducer </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// An array which is used to delete state keys when reducers are removed</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> keysToRemove </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">[</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">getReducerMap</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #000000">=&gt;</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// The root reducer function exposed by this object</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// This will be passed to the store</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">reduce</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: #000000">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #000000">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// If any reducers have been removed, clean up their state first</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">keysToRemove</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color: #000000">&gt;</span><span class="token plain"> </span><span class="token number" style="color: #ae81ff">0</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> state </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"> </span><span class="token spread operator" style="color: #000000">…</span><span class="token plain">state </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">for</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> key </span><span class="token keyword" style="color: #f92672">of</span><span class="token plain"> keysToRemove</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">delete</span><span class="token plain"> state</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain"> keysToRemove </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">[</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Delegate to the combined reducer</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combinedReducer</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Adds a new reducer with the specified key</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">add</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color: #000000">,</span><span class="token parameter"> reducer</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #000000">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token operator" style="color: #000000">!</span><span class="token plain">key </span><span class="token operator" style="color: #000000">||</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add the reducer to the reducer mapping</span><span class="token plain"></span></p>
<p><span class="token plain"> reducers</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"> </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> reducer</span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Generate a new combined reducer</span><span class="token plain"></span></p>
<p><span class="token plain"> combinedReducer </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Removes a reducer with the specified key</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">remove</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color: #000000">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">(</span><span class="token operator" style="color: #000000">!</span><span class="token plain">key </span><span class="token operator" style="color: #000000">||</span><span class="token plain"> </span><span class="token operator" style="color: #000000">!</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Remove it from the reducer mapping</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">delete</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #000000">[</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">]</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add the key to the list of keys to clean up</span><span class="token plain"></span></p>
<p><span class="token plain"> keysToRemove</span><span class="token punctuation" style="color: #000000">.</span><span class="token method function property-access" style="color: #e6d874">push</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">key</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Generate a new combined reducer</span><span class="token plain"></span></p>
<p><span class="token plain"> combinedReducer </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> staticReducers </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> users</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"></span></p>
<p><span class="token plain"> posts</span><span class="token operator" style="color: #000000">:</span><span class="token plain"> postsReducer</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">configureStore</span><span class="token punctuation" style="color: #000000">(</span><span class="token parameter">initialState</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #000000">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> reducerManager </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducerManager</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">staticReducers</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create a store with the root reducer function being the one exposed by the manager.</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #000000">(</span><span class="token plain">reducerManager</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">reduce</span><span class="token punctuation" style="color: #000000">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color: #000000">)</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Optional: Put the reducer manager on the store so it is easily accessible</span><span class="token plain"></span></p>
<p><span class="token plain"> store</span><span class="token punctuation" style="color: #000000">.</span><span class="token property-access">reducerManager</span><span class="token plain"> </span><span class="token operator" style="color: #000000">=</span><span class="token plain"> reducerManager</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #000000">}</span></p>
<p>Copy</p>
<p>To add a new reducer, one can now call <code class="language-js >store.reducerManager.add("asyncState", asyncReducer)</code>.</p>
<p>To remove a reducer, one can now call <code class="language-js >store.reducerManager.remove("asyncState")</code></p>
<h2 id="libraries-and-frameworks"><span id="libraries-and-frameworks" class="anchor enhancedAnchor_2LWZ"></span>Libraries and Frameworks<a href="#libraries-and-frameworks" class="hash-link" title="Direct link to heading">#</a></h2>
<p>There are a few good libraries out there that can help you add the above functionality automatically:</p>
<ul>
<li><a href="../../github.com/Microsoft/redux-dynamic-modules.html"><code class="language-js >redux-dynamic-modules</code></a>: This library introduces the concept of a ‘Redux Module’, which is a bundle of Redux artifacts (reducers, middleware) that should be dynamically loaded. It also exposes a React higher-order component to load ‘modules’ when areas of the application come online. Additionally, it has integrations with libraries like <code class="language-js >redux-thunk</code> and <code class="language-js >redux-saga</code> which also help dynamically load their artifacts (thunks, sagas).</li>
<li><a href="../../github.com/markerikson/redux-ecosystem-links/blob/master/reducers.html#dynamic-reducer-injection">Redux Ecosystem Links: Reducers - Dynamic Reducer Injection</a></li>
</ul>
<p><a href="isolating-redux-sub-apps.html" class="pagination-nav__link"></a></p>

<p>« Isolating Redux Sub-Apps</p>
<p><a href="troubleshooting.html" class="pagination-nav__link"></a></p>



</ul>



</body>
</html>
