<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>initializing-state</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}

  </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.css">

<script async defer src="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.js"></script>
    </head>
<body>

<ul>
<li><a href="structuring-reducers.html" class="menu__link">Structuring Reducers</a></li>
<li><a href="prerequisite-concepts.html" class="menu__link">Prerequisite Concepts</a></li>
<li><a href="basic-reducer-structure.html" class="menu__link">Basic Reducer Structure</a></li>
<li><a href="splitting-reducer-logic.html" class="menu__link">Splitting Reducer Logic</a></li>
<li><a href="refactoring-reducer-example.html" class="menu__link">Refactoring Reducers Example</a></li>
<li><a href="using-combinereducers.html" class="menu__link">Using combineReducers</a></li>
<li><a href="beyond-combinereducers.html" class="menu__link">Beyond combineReducers</a></li>
<li><a href="normalizing-state-shape.html" class="menu__link">Normalizing State Shape</a></li>
<li><a href="updating-normalized-data.html" class="menu__link">Updating Normalized Data</a></li>
<li><a href="reusing-reducer-logic.html" class="menu__link">Reusing Reducer Logic</a></li>
<li><a href="immutable-update-patterns.html" class="menu__link">Immutable Update Patterns</a></li>
<li><a href="initializing-state.html" class="menu__link menu__link--active active">Initializing State</a></li>
</ul></li>
</ul></li>



<ul>
<li><a href="../official/redux-toolkit/overview.html" class="menu__link">Redux Toolkit: Overview</a></li>
</ul></li>
</ul>
<h1 id="initializing-state"><span id="initializing-state" class="anchor enhancedAnchor_2LWZ"></span>Initializing State<a href="#initializing-state" class="hash-link" title="Direct link to heading">#</a></h1>
<p>There are two main ways to initialize state for your application. The <code class="language-js" >createStore</code> method can accept an optional <code class="language-js" >preloadedState</code> value as its second argument. Reducers can also specify an initial value by looking for an incoming state argument that is <code class="language-js" >undefined</code>, and returning the value they’d like to use as a default. This can either be done with an explicit check inside the reducer, or by using the ES6 default argument value syntax: <code class="language-js" >function myReducer(state = someDefaultValue, action)</code>.</p>
<p>It’s not always immediately clear how these two approaches interact. Fortunately, the process does follow some predictable rules. Here’s how the pieces fit together.</p>
<h2 id="summary"><span id="summary" class="anchor enhancedAnchor_2LWZ"></span>Summary<a href="#summary" class="hash-link" title="Direct link to heading">#</a></h2>
<p>Without <code class="language-js" >combineReducers()</code> or similar manual code, <code class="language-js" >preloadedState</code> always wins over <code class="language-js" >state = ...</code> in the reducer because the <code class="language-js" >state</code> passed to the reducer <em>is</em> <code class="language-js" >preloadedState</code> and <em>is not</em> <code class="language-js" >undefined</code>, so the ES6 argument syntax doesn’t apply.</p>
<p>With <code class="language-js" >combineReducers()</code> the behavior is more nuanced. Those reducers whose state is specified in <code class="language-js" >preloadedState</code> will receive that state. Other reducers will receive <code class="language-js" >undefined</code> <em>and because of that</em> will fall back to the <code class="language-js" >state = ...</code> default argument they specify.</p>
<p><strong>In general, <code class="language-js" >preloadedState</code> wins over the state specified by the reducer. This lets reducers specify initial data that makes sense <em>to them</em> as default arguments, but also allows loading existing data (fully or partially) when you’re hydrating the store from some persistent storage or the server.</strong></p>
<p><em>Note: Reducers whose initial state is populated using <code class="language-js" >preloadedState</code> will <strong>still need to provide a default value</strong> to handle when passed a <code class="language-js" >state</code> of <code class="language-js" >undefined</code>. All reducers are passed <code class="language-js" >undefined</code> on initialization, so they should be written such that when given <code class="language-js" >undefined</code>, some value should be returned. This can be any non-<code class="language-js" >undefined</code> value; there’s no need to duplicate the section of <code class="language-js" >preloadedState</code> here as the default.</em></p>
<h2 id="in-depth"><span id="in-depth" class="anchor enhancedAnchor_2LWZ"></span>In Depth<a href="#in-depth" class="hash-link" title="Direct link to heading">#</a></h2>
<h3 id="single-simple-reducer"><span id="single-simple-reducer" class="anchor enhancedAnchor_2LWZ"></span>Single Simple Reducer<a href="#single-simple-reducer" class="hash-link" title="Direct link to heading">#</a></h3>
<p>First let’s consider a case where you have a single reducer. Say you don’t use <code class="language-js" >combineReducers()</code>.</p>
<p>Then your reducer might look like this:</p>
<p><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">counter</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color: #f8f8f2">=</span><span class="token parameter"> </span><span class="token parameter number" style="color: #ae81ff">0</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">action</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">case</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘INCREMENT’</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state </span><span class="token operator" style="color: #f8f8f2">+</span><span class="token plain"> </span><span class="token number" style="color: #ae81ff">1</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword" style="color: #f92672">case</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘DECREMENT’</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state </span><span class="token operator" style="color: #f8f8f2">-</span><span class="token plain"> </span><span class="token number" style="color: #ae81ff">1</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">default</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state</span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span></p>
<p>Copy</p>
<p>Now let’s say you create a store with it.</p>
<p><span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">counter</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">log</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">getState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// 0</span></p>
<p>Copy</p>
<p>The initial state is zero. Why? Because the second argument to <code class="language-js" >createStore</code> was <code class="language-js" >undefined</code>. This is the <code class="language-js" >state</code> passed to your reducer the first time. When Redux initializes it dispatches a “dummy” action to fill the state. So your <code class="language-js" >counter</code> reducer was called with <code class="language-js" >state</code> equal to <code class="language-js" >undefined</code>. <strong>This is exactly the case that “activates” the default argument.</strong> Therefore, <code class="language-js" >state</code> is now <code class="language-js" >0</code> as per the default <code class="language-js" >state</code> value (<code class="language-js" >state = 0</code>). This state (<code class="language-js" >0</code>) will be returned.</p>
<p>Let’s consider a different scenario:</p>
<p><span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">counter</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> </span><span class="token number" style="color: #ae81ff">42</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">log</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">getState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// 42</span></p>
<p>Copy</p>
<p>Why is it <code class="language-js" >42</code>, and not <code class="language-js" >0</code>, this time? Because <code class="language-js" >createStore</code> was called with <code class="language-js" >42</code> as the second argument. This argument becomes the <code class="language-js" >state</code> passed to your reducer along with the dummy action. <strong>This time, <code class="language-js" >state</code> is not undefined (it’s <code class="language-js" >42</code>!), so ES6 default argument syntax has no effect.</strong> The <code class="language-js" >state</code> is <code class="language-js" >42</code>, and <code class="language-js" >42</code> is returned from the reducer.</p>
<h3 id="combined-reducers"><span id="combined-reducers" class="anchor enhancedAnchor_2LWZ"></span>Combined Reducers<a href="#combined-reducers" class="hash-link" title="Direct link to heading">#</a></h3>
<p>Now let’s consider a case where you use <code class="language-js" >combineReducers()</code>. You have two reducers:</p>
<p><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">a</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘lol’</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain" style="display: inline-block"> </span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">b</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘wat’</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> state</span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span></p>
<p>Copy</p>
<p>The reducer generated by <code class="language-js" >combineReducers({ a, b })</code> looks like this:</p>
<p><span class="token comment" style="color: #c6cad2">// const combined = combineReducers({ a, b })</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combined</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color: #f8f8f2">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color: #f8f8f2">{</span><span class="token parameter punctuation" style="color: #f8f8f2">}</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> a</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">a</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">a</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span></p>
<p><span class="token plain"> b</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">b</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">b</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span></p>
<p>Copy</p>
<p>If we call <code class="language-js" >createStore</code> without the <code class="language-js" >preloadedState</code>, it’s going to initialize the <code class="language-js" >state</code> to <code class="language-js" >{}</code>. Therefore, <code class="language-js" >state.a</code> and <code class="language-js" >state.b</code> will be <code class="language-js" >undefined</code> by the time it calls <code class="language-js" >a</code> and <code class="language-js" >b</code> reducers. <strong>Both <code class="language-js" >a</code> and <code class="language-js" >b</code> reducers will receive <code class="language-js" >undefined</code> as <em>their</em> <code class="language-js" >state</code> arguments, and if they specify default <code class="language-js" >state</code> values, those will be returned.</strong> This is how the combined reducer returns a <code class="language-js" >{ a: 'lol', b: 'wat' }</code> state object on the first invocation.</p>
<p><span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">combined</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">log</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">getState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// { a: ‘lol’, b: ‘wat’ }</span></p>
<p>Copy</p>
<p>Let’s consider a different scenario:</p>
<p><span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘redux’</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">combined</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> a</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">‘horse’</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">log</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">getState</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// { a: ‘horse’, b: ‘wat’ }</span></p>
<p>Copy</p>
<p>Now I specified the <code class="language-js" >preloadedState</code> as the argument to <code class="language-js" >createStore()</code>. The state returned from the combined reducer <em>combines</em> the initial state I specified for the <code class="language-js" >a</code> reducer with the <code class="language-js" >'wat'</code> default argument specified that <code class="language-js" >b</code> reducer chose itself.</p>
<p>Let’s recall what the combined reducer does:</p>
<p><span class="token comment" style="color: #c6cad2">// const combined = combineReducers({ a, b })</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combined</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state </span><span class="token parameter operator" style="color: #f8f8f2">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color: #f8f8f2">{</span><span class="token parameter punctuation" style="color: #f8f8f2">}</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span></p>
<p><span class="token plain"> a</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">a</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">a</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span></p>
<p><span class="token plain"> b</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">b</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">b</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span></p>
<p><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span></p>
<p><span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span></p>
<p>Copy</p>
<p>In this case, <code class="language-js" >state</code> was specified so it didn’t fall back to <code class="language-js" >{}</code>. It was an object with <code class="language-js" >a</code> field equal to <code class="language-js" >'horse'</code>, but without the <code class="language-js" >b</code> field. This is why the <code class="language-js" >a</code> reducer received <code class="language-js" >'horse'</code> as its <code class="language-js" >state</code> and gladly returned it, but the <code class="language-js" >b</code> reducer received <code class="language-js" >undefined</code> as its <code class="language-js" >state</code> and thus returned <em>its idea</em> of the default <code class="language-js" >state</code> (in our example, <code class="language-js" >'wat'</code>). This is how we get <code class="language-js" >{ a: 'horse', b: 'wat' }</code> in return.</p>
<h2 id="recap"><span id="recap" class="anchor enhancedAnchor_2LWZ"></span>Recap<a href="#recap" class="hash-link" title="Direct link to heading">#</a></h2>
<p>To sum this up, if you stick to Redux conventions and return the initial state from reducers when they’re called with <code class="language-js" >undefined</code> as the <code class="language-js" >state</code> argument (the easiest way to implement this is to specify the <code class="language-js" >state</code> ES6 default argument value), you’re going to have a nice useful behavior for combined reducers. <strong>They will prefer the corresponding value in the <code class="language-js" >preloadedState</code> object you pass to the <code class="language-js" >createStore()</code> function, but if you didn’t pass any, or if the corresponding field is not set, the default <code class="language-js" >state</code> argument specified by the reducer is chosen instead.</strong> This approach works well because it provides both initialization and hydration of existing data, but lets individual reducers reset their state if their data was not preserved. Of course you can apply this pattern recursively, as you can use <code class="language-js" >combineReducers()</code> on many levels, or even compose reducers manually by calling reducers and giving them the relevant part of the state tree.</p>
<p><a href="immutable-update-patterns.html" class="pagination-nav__link"></a></p>

<p>« Immutable Update Patterns</p>
<p><a href="../official/understanding/thinking-in-redux/motivation.html" class="pagination-nav__link"></a></p>

<p>Motivation »</p>
<ul>
<li><a href="#summary" class="table-of-contents__link">Summary</a></li>
<li><a href="#in-depth" class="table-of-contents__link">In Depth</a>
<ul>
<li><a href="#single-simple-reducer" class="table-of-contents__link">Single Simple Reducer</a></li>
<li><a href="#combined-reducers" class="table-of-contents__link">Combined Reducers</a></li>
</ul></li>
<li><a href="#recap" class="table-of-contents__link">Recap</a></li>
</ul>

<ul>
<li><a href="../official/introduction/getting-started.html" class="footer__link-item">Getting Started</a></li>
<li><a href="../official/tutorials/essentials/part-1-overview-concepts.html" class="footer__link-item">Tutorial</a></li>
<li><a href="../official/faq.html" class="footer__link-item">FAQ</a></li>
<li><a href="../official/api/api-reference.html" class="footer__link-item">API Reference</a></li>
</ul>

<ul>

</ul>


</body>
</html>
