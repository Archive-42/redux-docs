<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>writing-tests</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}

  </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.css">

<script async defer src="https://cdn.jsdelivr.net/gh/bgoonz/GIT-CDN-FILES/prism.js">
</script>
    </head>
<body>

<ul><li>
<a href="reducing-boilerplate.html" class="menu__link">Reducing Boilerplate</a>
</li>
<li>
<a href="server-rendering.html" class="menu__link">Server Rendering</a>
</li>
<li>
<a href="writing-tests.html" class="menu__link menu__link--active active">Writing Tests</a>
</li>
<li>
<a href="code-splitting.html" class="menu__link">Code Splitting</a>
</li>

<ul>

</ul>
</li>
</ul>
</li>


</li>
<li>
<a href="#!" class="menu__link menu__link--sublist">FAQ</a>
<ul>

</ul>
</li>

<ul>

</ul>
</li>


<h1 id="writing-tests">
<span id="writing-tests" class="anchor enhancedAnchor_2LWZ">
</span>Writing Tests<a href="#writing-tests" class="hash-link" title="Direct link to heading">#</a>
</h1>
<p>Because most of the Redux code you write are functions, and many of them are pure, they are easy to test without mocking.</p>
<h3 id="setting-up">
<span id="setting-up" class="anchor enhancedAnchor_2LWZ">
</span>Setting Up<a href="#setting-up" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>We recommend <a href="../../facebook.github.io/jest/index.html">Jest</a> as the testing engine. Note that it runs in a Node environment, so you won’t have access to the DOM.</p>
<p>
<span class="token plain">npm install –save-dev jest</span>
</p>
<p>Copy</p>
<p>To use it together with <a href="../../babeljs.io/index.html">Babel</a>, you will need to install <code class="language-js" >babel-jest</code>:</p>
<p>
<span class="token plain">npm install –save-dev babel-jest</span>
</p>
<p>Copy</p>
<p>and configure it to use <a href="../../github.com/babel/babel/tree/master/packages/babel-preset-env.html">babel-preset-env</a> features in <code class="language-js" >.babelrc</code>:</p>
<p>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“presets”</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token string" style="color: #a6e22e">“<span class="citation" data-cites="babel/preset-env">@babel/preset-env</span>”</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>Then, add this to <code class="language-js" >scripts</code> in your <code class="language-js" >package.json</code>:</p>
<p>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token spread operator" style="color: #f8f8f2">…</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“scripts”</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token spread operator" style="color: #f8f8f2">…</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“test”</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“jest”</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“test:watch”</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">“npm test – –watch”</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token spread operator" style="color: #f8f8f2">…</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>and run <code class="language-js" >npm test</code> to run it once, or <code class="language-js" >npm run test:watch</code> to test on every file change.</p>
<h3 id="action-creators">
<span id="action-creators" class="anchor enhancedAnchor_2LWZ">
</span>Action Creators<a href="#action-creators" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>In Redux, action creators are functions which return plain objects. When testing action creators, we want to test whether the correct action creator was called and also whether the right action was returned.</p>
<h4 id="example">
<span id="example" class="anchor enhancedAnchor_2LWZ">
</span>Example<a href="#example" class="hash-link" title="Direct link to heading">#</a>
</h4>
<p>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">addTodo</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">text</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘ADD_TODO’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>can be tested like:</p>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports operator" style="color: #f8f8f2">*</span>
<span class="token imports"> </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> actions</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../actions/TodoActions’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports operator" style="color: #f8f8f2">*</span>
<span class="token imports"> </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> types</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../constants/ActionTypes’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">describe</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘actions’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘should create an action to add a todo’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> text </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Finish docs’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> expectedAction </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> types</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token constant" style="color: #f92672">ADD_TODO</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">actions</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">addTodo</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">text</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toEqual</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">expectedAction</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
</p>
<p>Copy</p>
<h3 id="async-action-creators">
<span id="async-action-creators" class="anchor enhancedAnchor_2LWZ">
</span>Async Action Creators<a href="#async-action-creators" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>For async action creators using <a href="../../github.com/reduxjs/redux-thunk.html">Redux Thunk</a> or other middleware, it’s best to completely mock the Redux store for tests. You can apply the middleware to a mock store using <a href="../../github.com/reduxjs/redux-mock-store.html">redux-mock-store</a>. You can also use <a href="../../www.wheresrhys.co.uk/fetch-mock/index.html">fetch-mock</a> to mock the HTTP requests.</p>
<h4 id="example-1">
<span id="example-1" class="anchor enhancedAnchor_2LWZ">
</span>Example<a href="#example-1" class="hash-link" title="Direct link to heading">#</a>
</h4>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘cross-fetch/polyfill’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">fetchTodosRequest</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token constant" style="color: #f92672">FETCH_TODOS_REQUEST</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">fetchTodosSuccess</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">body</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token constant" style="color: #f92672">FETCH_TODOS_SUCCESS</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> body</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">fetchTodosFailure</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">ex</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token constant" style="color: #f92672">FETCH_TODOS_FAILURE</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> ex</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">fetchTodos</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token parameter">dispatch</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token function" style="color: #e6d874">fetchTodosRequest</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">fetch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘http://example.com/todos’</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">then</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">res</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> res</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">json</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">then</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">body</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token function" style="color: #e6d874">fetchTodosSuccess</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">body</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token keyword control-flow" style="color: #f92672">catch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">ex</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token function" style="color: #e6d874">fetchTodosFailure</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">ex</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>can be tested like:</p>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">configureMockStore</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘redux-mock-store’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">thunk</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘redux-thunk’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports operator" style="color: #f8f8f2">*</span>
<span class="token imports"> </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> actions</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../actions/TodoActions’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports operator" style="color: #f8f8f2">*</span>
<span class="token imports"> </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> types</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../constants/ActionTypes’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">fetchMock</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘fetch-mock’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">expect</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘expect’</span>
<span class="token plain"> </span>
<span class="token comment" style="color: #c6cad2">// You can use any testing library</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> middlewares </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">thunk</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> mockStore </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">configureMockStore</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">middlewares</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">describe</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘async actions’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">afterEach</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> fetchMock</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">restore</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘creates FETCH_TODOS_SUCCESS when fetching todos has been done’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> fetchMock</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">getOnce</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘/todos’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> body</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> todos</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token string" style="color: #a6e22e">‘do something’</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> headers</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘content-type’</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘application/json’</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> expectedActions </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> types</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token constant" style="color: #f92672">FETCH_TODOS_REQUEST</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> types</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token constant" style="color: #f92672">FETCH_TODOS_SUCCESS</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> body</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> todos</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token string" style="color: #a6e22e">‘do something’</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> store </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">mockStore</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> todos</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> store</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">actions</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">fetchTodos</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">then</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token comment" style="color: #c6cad2">// return of async actions</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">store</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">getActions</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toEqual</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">expectedActions</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
</p>
<p>Copy</p>
<h3 id="reducers">
<span id="reducers" class="anchor enhancedAnchor_2LWZ">
</span>Reducers<a href="#reducers" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>A reducer should return the new state after applying the action to the previous state, and that’s the behavior tested below.</p>
<h4 id="example-2">
<span id="example-2" class="anchor enhancedAnchor_2LWZ">
</span>Example<a href="#example-2" class="hash-link" title="Direct link to heading">#</a>
</h4>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> </span>
<span class="token constant" style="color: #f92672">ADD_TODO</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../constants/ActionTypes’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> initialState </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Use Redux’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">0</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">default</span>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">todos</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">state </span>
<span class="token parameter operator" style="color: #f8f8f2">=</span>
<span class="token parameter"> initialState</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter"> action</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">switch</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">action</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">type</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">case</span>
<span class="token plain"> </span>
<span class="token constant" style="color: #f92672">ADD_TODO</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> state</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">reduce</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">maxId</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter"> todo</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token known-class-name class-name">Math</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">max</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">todo</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">id</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> maxId</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">-</span>
<span class="token number" style="color: #ae81ff">1</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">+</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">1</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> action</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">text</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token spread operator" style="color: #f8f8f2">…</span>
<span class="token plain">state</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">default</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> state</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>can be tested like:</p>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">reducer</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../structuring-reducers/todos’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports operator" style="color: #f8f8f2">*</span>
<span class="token imports"> </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> types</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../constants/ActionTypes’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">describe</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘todos reducer’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘should return the initial state’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token function" style="color: #e6d874">reducer</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token keyword nil" style="color: #f92672">undefined</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toEqual</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Use Redux’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">0</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘should handle ADD_TODO’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">reducer</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> types</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token constant" style="color: #f92672">ADD_TODO</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Run the tests’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toEqual</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Run the tests’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">0</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">reducer</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Use Redux’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">0</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> types</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token constant" style="color: #f92672">ADD_TODO</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Run the tests’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toEqual</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">[</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Run the tests’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">1</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> text</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Use Redux’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> completed</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token boolean" style="color: #ae81ff">false</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> id</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token number" style="color: #ae81ff">0</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">]</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
</p>
<p>Copy</p>
<h3 id="components">
<span id="components" class="anchor enhancedAnchor_2LWZ">
</span>Components<a href="#components" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>First, we will install <a href="../../testing-library.com/docs/react-testing-library/intro/index.html">React Testing Library</a>. React Testing Library is a simple and complete React DOM testing utility that encourage good testing practices. It uses react-dom’s <code class="language-js" >render</code> function and <code class="language-js" >act</code> from react-dom/tests-utils.</p>
<p>
<span class="token plain">npm install –save-dev <span class="citation" data-cites="testing-library/react">@testing-library/react</span>
</span>
</p>
<p>Copy</p>
<p>If you are using jest as recommended above, we also recommend installing <a href="../../github.com/testing-library/jest-dom.html">jest-dom</a> as it provides a set of custom jest matchers that you can use to extend jest. These will make your tests more declarative, clear to read and to maintain. jest-dom is being used in the examples below.</p>
<p>
<span class="token plain">npm install –save-dev <span class="citation" data-cites="testing-library/jest-dom">@testing-library/jest-dom</span>
</span>
</p>
<p>Copy</p>
<p>Consider the following <code class="language-js" >App</code> component:</p>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">{</span>
<span class="token imports"> useSelector </span>
<span class="token imports punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘react-redux’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">default</span>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function maybe-class-name" style="color: #e6d874">App</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> user </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">useSelector</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">state</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> state</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">user</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">&lt;</span>
<span class="token plain">div</span>
<span class="token operator" style="color: #f8f8f2">&gt;</span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">user</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token operator" style="color: #f8f8f2">&lt;</span>
<span class="token operator" style="color: #f8f8f2">/</span>
<span class="token plain">div</span>
<span class="token operator" style="color: #f8f8f2">&gt;</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>To test the component, we <code class="language-js" >render</code> it into the DOM and pass stubbed callbacks as props, then we assert whether the callbacks were called when expected. We can use the <code class="language-js" >wrapper</code> option in the <code class="language-js" >render</code> function and export our own <code class="language-js" >render</code> function as explained in React Testing Library’s <a href="../../testing-library.com/docs/react-testing-library/setup/index.html">setup docs</a>.</p>
<p>Our <code class="language-js" >render</code> function can look like this:</p>
<p>
<span class="token comment" style="color: #c6cad2">// test-utils.js</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports maybe-class-name">React</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘react’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">{</span>
<span class="token imports"> render </span>
<span class="token imports keyword module" style="color: #f92672">as</span>
<span class="token imports"> rtlRender </span>
<span class="token imports punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘<span class="citation" data-cites="testing-library/react">@testing-library/react</span>’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">{</span>
<span class="token imports"> createStore </span>
<span class="token imports punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘redux’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">{</span>
<span class="token imports"> </span>
<span class="token imports maybe-class-name">Provider</span>
<span class="token imports"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘react-redux’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// Import your own reducer</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports">reducer</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../reducer’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">render</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token parameter">ui</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter">
</span>
</p>
<p>
<span class="token parameter"> </span>
<span class="token parameter punctuation" style="color: #f8f8f2">{</span>
<span class="token parameter">
</span>
</p>
<p>
<span class="token parameter"> initialState</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter">
</span>
</p>
<p>
<span class="token parameter"> store </span>
<span class="token parameter operator" style="color: #f8f8f2">=</span>
<span class="token parameter"> </span>
<span class="token parameter function" style="color: #e6d874">createStore</span>
<span class="token parameter punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">reducer</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter"> initialState</span>
<span class="token parameter punctuation" style="color: #f8f8f2">)</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter">
</span>
</p>
<p>
<span class="token parameter"> </span>
<span class="token parameter operator" style="color: #f8f8f2">…</span>
<span class="token parameter">renderOptions</span>
</p>
<p>
<span class="token parameter"> </span>
<span class="token parameter punctuation" style="color: #f8f8f2">}</span>
<span class="token parameter"> </span>
<span class="token parameter operator" style="color: #f8f8f2">=</span>
<span class="token parameter"> </span>
<span class="token parameter punctuation" style="color: #f8f8f2">{</span>
<span class="token parameter punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">function</span>
<span class="token plain"> </span>
<span class="token function maybe-class-name" style="color: #e6d874">Wrapper</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter punctuation" style="color: #f8f8f2">{</span>
<span class="token parameter"> children </span>
<span class="token parameter punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">&lt;</span>
<span class="token maybe-class-name">Provider</span>
<span class="token plain"> store</span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">store</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token operator" style="color: #f8f8f2">&gt;</span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">children</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token operator" style="color: #f8f8f2">&lt;</span>
<span class="token operator" style="color: #f8f8f2">/</span>
<span class="token maybe-class-name">Provider</span>
<span class="token operator" style="color: #f8f8f2">&gt;</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">rtlRender</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">ui</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> wrapper</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token maybe-class-name">Wrapper</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token spread operator" style="color: #f8f8f2">…</span>
<span class="token plain">renderOptions </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// re-export everything</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token exports operator" style="color: #f8f8f2">*</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘<span class="citation" data-cites="testing-library/react">@testing-library/react</span>’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// override render method</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">export</span>
<span class="token plain"> </span>
<span class="token exports punctuation" style="color: #f8f8f2">{</span>
<span class="token exports"> render </span>
<span class="token exports punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>And our test can use our exported <code class="language-js" >render</code> function:</p>
<p>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports maybe-class-name">React</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘react’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// We’re using our own custom render function and not RTL’s render</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// our custom utils also re-export everything from RTL</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token comment" style="color: #c6cad2">// so we can import fireEvent and screen here as well</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports punctuation" style="color: #f8f8f2">{</span>
<span class="token imports"> render</span>
<span class="token imports punctuation" style="color: #f8f8f2">,</span>
<span class="token imports"> fireEvent</span>
<span class="token imports punctuation" style="color: #f8f8f2">,</span>
<span class="token imports"> screen </span>
<span class="token imports punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../test-utils’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token keyword module" style="color: #f92672">import</span>
<span class="token plain"> </span>
<span class="token imports maybe-class-name">App</span>
<span class="token plain"> </span>
<span class="token keyword module" style="color: #f92672">from</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘../../containers/App’</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘Renders the app with initialState’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">render</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token operator" style="color: #f8f8f2">&lt;</span>
<span class="token maybe-class-name">App</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">/</span>
<span class="token operator" style="color: #f8f8f2">&gt;</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> initialState</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> user</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘Redux User’</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">screen</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">getByText</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token regex regex-delimiter" style="color: #fd971f">/</span>
<span class="token regex regex-source language-regex" style="color: #fd971f">redux user</span>
<span class="token regex regex-delimiter" style="color: #fd971f">/</span>
<span class="token regex regex-flags" style="color: #fd971f">i</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toBeInTheDocument</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
</p>
<p>Copy</p>
<h3 id="middleware">
<span id="middleware" class="anchor enhancedAnchor_2LWZ">
</span>Middleware<a href="#middleware" class="hash-link" title="Direct link to heading">#</a>
</h3>
<p>Middleware functions wrap behavior of <code class="language-js" >dispatch</code> calls in Redux, so to test this modified behavior we need to mock the behavior of the <code class="language-js" >dispatch</code> call.</p>
<h4 id="example-3">
<span id="example-3" class="anchor enhancedAnchor_2LWZ">
</span>Example<a href="#example-3" class="hash-link" title="Direct link to heading">#</a>
</h4>
<p>First, we’ll need a middleware function. This is similar to the real <a href="../../github.com/reduxjs/redux-thunk/blob/master/src/index.html">redux-thunk</a>.</p>
<p>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token function-variable function" style="color: #e6d874">thunk</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter punctuation" style="color: #f8f8f2">{</span>
<span class="token parameter"> dispatch</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter"> getState </span>
<span class="token parameter punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token parameter">next</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token parameter">action</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">if</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token keyword" style="color: #f92672">typeof</span>
<span class="token plain"> action </span>
<span class="token operator" style="color: #f8f8f2">===</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘function’</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">action</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> getState</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">next</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">action</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>We need to create a fake <code class="language-js" >getState</code>, <code class="language-js" >dispatch</code>, and <code class="language-js" >next</code> functions. We use <code class="language-js" >jest.fn()</code> to create stubs, but with other test frameworks you would likely use <a href="../../sinonjs.org/index.html">Sinon</a>.</p>
<p>The invoke function runs our middleware in the same way Redux does.</p>
<p>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token function-variable function" style="color: #e6d874">create</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> store </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> getState</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> jest</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">fn</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> dispatch</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> jest</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">fn</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> next </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> jest</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">fn</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token function-variable function" style="color: #e6d874">invoke</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token parameter">action</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">thunk</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">store</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">next</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">action</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword control-flow" style="color: #f92672">return</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> store</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> next</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> invoke </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
</p>
<p>Copy</p>
<p>We test that our middleware is calling the <code class="language-js" >getState</code>, <code class="language-js" >dispatch</code>, and <code class="language-js" >next</code> functions at the right time.</p>
<p>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘passes through non-function action’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> next</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> invoke </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">create</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> action </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> type</span>
<span class="token operator" style="color: #f8f8f2">:</span>
<span class="token plain"> </span>
<span class="token string" style="color: #a6e22e">‘TEST’</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">invoke</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">action</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">next</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toHaveBeenCalledWith</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">action</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘calls the function’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> invoke </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">create</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> fn </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> jest</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">fn</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">invoke</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">fn</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">fn</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toHaveBeenCalled</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain" style="display: inline-block"> </span>
</p>
<p>
<span class="token plain">
</span>
<span class="token function" style="color: #e6d874">it</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘passes dispatch and getState’</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token keyword" style="color: #f92672">const</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain"> store</span>
<span class="token punctuation" style="color: #f8f8f2">,</span>
<span class="token plain"> invoke </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token plain"> </span>
<span class="token operator" style="color: #f8f8f2">=</span>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">create</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">invoke</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token parameter">dispatch</span>
<span class="token parameter punctuation" style="color: #f8f8f2">,</span>
<span class="token parameter"> getState</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain"> </span>
<span class="token arrow operator" style="color: #f8f8f2">=&gt;</span>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">{</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘TEST DISPATCH’</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">getState</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">store</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">dispatch</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toHaveBeenCalledWith</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token string" style="color: #a6e22e">‘TEST DISPATCH’</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain"> </span>
<span class="token function" style="color: #e6d874">expect</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token plain">store</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token property-access">getState</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token punctuation" style="color: #f8f8f2">.</span>
<span class="token method function property-access" style="color: #e6d874">toHaveBeenCalled</span>
<span class="token punctuation" style="color: #f8f8f2">(</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
<span class="token plain">
</span>
</p>
<p>
<span class="token plain">
</span>
<span class="token punctuation" style="color: #f8f8f2">}</span>
<span class="token punctuation" style="color: #f8f8f2">)</span>
</p>
<p>Copy</p>
<p>In some cases, you will need to modify the <code class="language-js" >create</code> function to use different mock implementations of <code class="language-js" >getState</code> and <code class="language-js" >next</code>.</p>
<h3 id="glossary">
<span id="glossary" class="anchor enhancedAnchor_2LWZ">
</span>Glossary<a href="#glossary" class="hash-link" title="Direct link to heading">#</a>
</h3>
<ul>
<li>
<p>
<a href="../../testing-library.com/docs/react-testing-library/intro/index.html">React Testing Library</a>: React Testing Library is a very light-weight solution for testing React components. It provides light utility functions on top of react-dom and react-dom/test-utils, in a way that encourages better testing practices. Its primary guiding principle is: “The more your tests resemble the way your software is used, the more confidence they can give you.”</p>
</li>
<li>
<p>
<a href="../../reactjs.org/docs/test-utils.html">React Test Utils</a>: ReactTestUtils makes it easy to test React components in the testing framework of your choice. React Testing Library uses the <code class="language-js" >act</code> function exported by React Test Utils.</p>
</li>
</ul>
<p>
<a href="server-rendering.html" class="pagination-nav__link">
</a>
</p>

<p>« Server Rendering</p>
<p>
<a href="computing-derived-data.html" class="pagination-nav__link">
</a>
</p>

<p>Computing Derived Data »</p>
<ul>
<li>
<a href="#setting-up" class="table-of-contents__link">Setting Up</a>
</li>
<li>
<a href="#action-creators" class="table-of-contents__link">Action Creators</a>
</li>
<li>
<a href="#async-action-creators" class="table-of-contents__link">Async Action Creators</a>
</li>
<li>
<a href="#reducers" class="table-of-contents__link">Reducers</a>
</li>
<li>
<a href="#components" class="table-of-contents__link">Components</a>
</li>
<li>
<a href="#middleware" class="table-of-contents__link">Middleware</a>
</li>
<li>
<a href="#glossary" class="table-of-contents__link">Glossary</a>
</li>
</ul>


</ul>



</body>
</html>
